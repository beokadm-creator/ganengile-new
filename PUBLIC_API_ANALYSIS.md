# 공공데이터 포털 분석 보고서
# "가는길에" 서비스 관련 API 취합

## 분석 개요
- **분석일:** 2026년 2월 4일
- **데이터 출처:** 공공데이터 포털 (https://www.data.go.kr)
- **검색 키워드:** 지하철, 자전거
- **목적:** 서비스 연동 가능한 공공 API 발굴

---

## 1. 지하철 관련 API (핵심)

### 🔴 우선순위 1: 실시간 운영 정보

#### 1.1 서울특별시_지하철 실시간 도착정보
- **API ID:** 15058052
- **제공기관:** 서울특별시
- **포맷:** XML, JSON
- **활용신청:** 22,333건
- **용도:** 길러 출발 알림, 도착 예상 시간 계산
- **연동 시점:** Phase 3 (실시간 추적)
- **필수:** ✅ YES

**제공 정보:**
- 지하철호선ID
- 지하철역ID
- 지하철역명
- 열차종류
- 도착예정시간
- 현재위치

#### 1.2 서울특별시_지하철 실시간 열차 위치정보
- **API ID:** 15058569
- **제공기관:** 서울특별시
- **포맷:** XML, JSON
- **활용신청:** 16,820건
- **용도:** 실시간 열차 위치 추적
- **연동 시점:** Phase 3 (실시간 추적)
- **필수:** ✅ YES

**제공 정보:**
- 열차번호
- 현재역ID
- 종착역ID
- 열차위치

#### 1.3 서울특별시_지하철 실시간 도착정보(일괄)
- **API ID:** 15125683
- **제공기관:** 서울특별시
- **포맷:** XML
- **활용신청:** 5,888건
- **용도:** 서울 전체 역 일괄 조회
- **연동 시점:** Phase 3 (실시간 추적)
- **필수:** ⚪ 선택사항 (일괄 처리용)

---

### 🟡 우선순위 2: 마스터 데이터

#### 2.1 서울교통공사_노선별 지하철역 정보
- **API ID:** 15058404
- **제공기관:** 서울교통공사
- **포맷:** XML
- **활용신청:** 9,452건
- **용도:** 초기 역 데이터 import (데이터 검증)
- **연동 시점:** Phase 1.5 (데이터 초기화)
- **필수:** ⚪ 선택사항 (자체 데이터와 교차 검증용)

**제공 정보:**
- 전철역코드
- 전철역명
- 호선별 역사 정보
- 외국어 표기

#### 2.2 국토교통부_(TAGO)_지하철정보
- **API ID:** 15098554
- **제공기관:** 국토교통부
- **포맷:** XML, JSON
- **활용신청:** 1,063건
- **용도:** 전국 지하철역 정보 (타 도시 확장용)
- **연동 시점:** Phase 4 (다른 도시 확장)
- **필수:** ⚪ 선택사항 (부산, 대구 등 확장 시)

**제공 정보:**
- 지하철역 목록
- 역별 출구 목록
- 출구별 버스노선 목록
- 역별 시간표

---

### 🟢 우선순위 3: 부가 정보

#### 3.1 서울교통공사_역코드로 지하철 열차 시간표 검색
- **API ID:** 15057982
- **제공기관:** 서울교통공사
- **포맷:** XML
- **활용신청:** 2,610건
- **용도:** 정기적 동선 시간표 제공
- **연동 시점:** Phase 2 (동선 등록)
- **필수:** ⚪ 선택사항

#### 3.2 서울교통공사_역명으로 지하철역 검색
- **API ID:** 15058954
- **제공기관:** 서울교통공사
- **포맷:** XML
- **활용신청:** 1,583건
- **용도:** 역 검색 자동완성
- **연동 시점:** Phase 2 (StationSearchScreen)
- **필수:** ⚪ 선택사항

#### 3.3 서울특별시_서울시 지하철역 엘리베이터 위치정보
- **API ID:** 15098158
- **제공기관:** 서울특별시
- **포맷:** XML, JSON
- **활용신청:** 3,248건
- **용도:** 교통약자 배송 경로 안내
- **연동 시점:** Phase 4 (접근성 개선)
- **필수:** ❌ NO (옵션 기능)

#### 3.4 서울교통공사_지하철 호선별 첫차와 막차 정보
- **API ID:** 15056647
- **제공기관:** 서울교통공사
- **포맷:** XML
- **활용신청:** 711건
- **용도:** 배송 가능 시간대 안내
- **연동 시점:** Phase 2 (동선 등록)
- **필수:** ⚪ 선택사항

---

## 2. 자전거 관련 API (확장용)

### 🔵 현재 서비스 연관성: 낮음
- **이유:** "가는길에"는 지하철 이용자를 타겟으로 함
- **활용 방안:** 지하철 ↔ 자전거 연계 배송 (마지막 1킬로미터)

#### 2.1 서울특별시 공공자전거 실시간 대여정보
- **API ID:** 15051891
- **제공기관:** 서울특별시
- **포맷:** JSON
- **활용신청:** 5,032건
- **용도:** 따릉이 대여소 위치, 자전거 수량
- **연동 시점:** Phase 5 (마지막 1킬로미터 연계)
- **필수:** ❌ NO (확장 옵션)

#### 2.2 서울특별시_공공자전거 대여 이력
- **API ID:** 15077786
- **제공기관:** 서울특별시
- **포맷:** XML
- **활용신청:** 미상
- **용도:** 대여소 인기도 분석
- **연동 시점:** Phase 5 (데이터 분석)
- **필수:** ❌ NO

---

## 3. 제외된 API (중복/무관)

### ❌ 제외 사유
1. **실내공기질정보** - 서비스와 무관
2. **지연열차 승차권 확인** - 별도 티켓팅 없음
3. **타 도시 지하철 정보** - 초기 서비스 대상 아님

---

## 4. 연동 우선순위 및 로드맵

### Phase 1: 데이터 초기화 (선택)
```
[자체 데이터] 서울 지하철역 280개 import
  ↓
[API 교차 검증] 서울교통공사_노선별 지하철역 정보
  - 역 코드 확인
  - 외국어 표기 추가
```

### Phase 2: 기본 기능 (선택)
```
[역 검색] 서울교통공사_역명으로 지하철역 검색
  - 자동완성 기능
  ↓
[시간표] 서울교통공사_역코드로 지하철 열차 시간표 검색
  - 정기적 동선 제안
```

### Phase 3: 실시간 추적 (필수) ★
```
[길러 출발] 서울특별시_지하철 실시간 도착정보
  - 도착 예상 시간 계산
  ↓
[실시간 위치] 서울특별시_지하철 실시간 열차 위치정보
  - 현재 열차 위치 표시
  ↓
[일괄 처리] 서울특별시_지하철 실시간 도착정보(일괄)
  - 다중 역 동시 조회
```

### Phase 4: 다른 도시 확장
```
[부산/대구] 국토교통부_(TAGO)_지하철정보
  - 전국 지하철역 마스터
```

### Phase 5: 마지막 1킬로미터 (옵션)
```
[자전거 연계] 서울특별시 공공자전거 실시간 대여정보
  - 역 ~ 자전거 대여소 연결
```

---

## 5. API 활용 시나리오

### 시나리오 1: 길러 출발 알림
```
1. 길러가 "출발" 버튼 탭
2. Firebase Functions → API 호출
   GET /15058052/openapi.do?stationId=150
3. 응답: { 도착예정시간: "2026-02-04 14:23:00" }
4. 글러에게 푸시: "예상 도착: 14:23"
```

### 시나리오 2: 실시간 추적
```
1. 글러가 매칭 후 배송 시작
2. 30초마다 API 폴링
   GET /15058569/openapi.do?trainId=1234
3. 응답: { 현재역: "150", 종착역: "222" }
4. 지도에 실시간 위치 표시
```

### 시나리오 3: 다중 역 일괄 조회
```
1. 서울 전체 역 모니터링
2. 1분마다 API 호출
   GET /15125683/openapi.do
3. 응답: 전체 역 도착정보
4. 캐싱 후 길러에게 제공
```

---

## 6. API 인증 및 제한 사항

### 인증 방식
- **서비스 키:** 공공데이터 포털에서 발급
- **URL 기반:** 요청 URL에 인증키 포함
```
https://api.odcloud.go.kr/.../15058052?serviceKey=xxx&stationId=150
```

### 호출 제한
- **일일 제한:** API별 상이 (보통 1,000~10,000회/일)
- **대응:**
  - 캐싱 전략 (Redis)
  - 일괄 처리 API 활용
  - 폴링 최적화 (30초 → 1분)

### 비용
- **무료:** 모든 API 무료 제공
- **승인 필요:** 활용신청 후 승인 대기 (1~3일)

---

## 7. 결론

### ✅ 반드시 연동해야 할 API
1. **서울특별시_지하철 실시간 도착정보** (15058052)
2. **서울특별시_지하철 실시간 열차 위치정보** (15058569)

### ⚪ 선택적으로 연동할 API
3. **서울교통공사_역명으로 지하철역 검색** (15058954)
4. **서울교통공사_역코드로 지하철 열차 시간표 검색** (15057982)
5. **서울특별시_지하철 실시간 도착정보(일괄)** (15125683)

### ❌ 현재는 불필요한 API
- 자전거 관련 (Phase 5 확장 시 고려)
- 실내공기질, 지연열차 등 부가 정보

---

## 8. 다음 단계

1. **공공데이터 포털 활용신청**
   - 2개 핵심 API 신청
   - 서비스 키 발급

2. **Firebase Functions 개발**
   - API 래퍼 함수 작성
   - 에러 핸들링
   - 캐싱 전략

3. **테스트**
   - 실시간 데이터 연동 테스트
   - 도착 예상 시간 정확도 검증

---

_작성일: 2026년 2월 4일_
_작성자: OpenClaw DevOps Assistant_
_분석 범위: 공공데이터 포털 (지하철, 자전거)_
_총 API 발굴: 12개 (필수 2개, 선택 3개, 제외 7개)_
